STELLAR MILESTONE ESCROW - TESTING CHECKLIST
============================================

BACKEND STATUS: ✓ RUNNING on port 3001
FRONTEND STATUS: Ready to start

PRE-TESTING SETUP
=================

1. Database Migration
   □ Run: backend/supabase-add-milestone-tx-fields.sql in Supabase SQL Editor
   □ Verify columns added: creationTxHash, fundingTxHash, refundTxHash

2. Environment Variables
   □ backend/.env has CONTRACT_ID set
   □ backend/.env has DATABASE_URL set
   □ backend/.env has USE_REAL_CONTRACT='true' or 'false'
   □ frontend/.env has VITE_API_URL='http://localhost:3001'

3. Wallet Setup
   □ Freighter wallet installed
   □ Connected to Stellar Testnet
   □ Have test XLM (get from friendbot)


ROLE-BASED ACCESS TESTING
==========================

Test 1: Create Milestone (BUYING Mode Only)
--------------------------------------------
□ Connect wallet
□ Switch to BUYING mode
□ Navigate to /create-milestone
□ Enter freelancer address
□ Enter amount (e.g., 100 XLM)
□ Click "Create Milestone"
□ Sign transaction in Freighter
□ Verify success message
□ Verify redirected to dashboard
□ Verify milestone appears in dashboard

Expected: ✓ Success
Try in SELLING mode: ✗ Should show error/redirect


Test 2: Fund Milestone (BUYING Mode + Client Only)
---------------------------------------------------
□ In BUYING mode
□ Click on created milestone
□ Click "Fund Milestone" button
□ Sign transaction in Freighter
□ Verify XLM deducted from wallet
□ Verify status changes to FUNDED
□ Verify transaction hash shown
□ Click transaction hash → opens Stellar Explorer

Expected: ✓ XLM locked in contract
Try with different wallet: ✗ Should get 403 error
Try in SELLING mode: ✗ Should get 403 error


Test 3: Submit Work (SELLING Mode + Freelancer Only)
-----------------------------------------------------
□ Switch to SELLING mode
□ Verify milestone appears in dashboard
□ Click on milestone
□ Enter submission details
□ Click "Submit Work"
□ Sign transaction in Freighter
□ Verify status changes to SUBMITTED
□ Verify submission details saved

Expected: ✓ Work submitted
Try with different wallet: ✗ Should get 403 error
Try in BUYING mode: ✗ Should get 403 error


Test 4: Approve & Release (BUYING Mode + Client Only)
------------------------------------------------------
□ Switch to BUYING mode
□ Click on submitted milestone
□ Review submission details
□ Click "Approve & Release"
□ Sign transaction in Freighter
□ Verify XLM released to freelancer
□ Verify status changes to APPROVED
□ Verify transaction hash shown
□ Check freelancer wallet balance increased

Expected: ✓ Full amount released to freelancer
Try with different wallet: ✗ Should get 403 error
Try in SELLING mode: ✗ Should get 403 error


Test 5: Dispute (Client OR Freelancer)
---------------------------------------
□ Create and fund new milestone
□ As freelancer, submit work
□ As client OR freelancer, click "Dispute"
□ Verify status changes to DISPUTED
□ Verify both parties can see dispute status

Expected: ✓ Either party can dispute
Try with unrelated wallet: ✗ Should get 403 error


Test 6: Mode Switching
----------------------
□ In BUYING mode, verify only client milestones shown
□ Switch to SELLING mode
□ Verify only freelancer milestones shown
□ Verify no overlap between modes
□ Verify dashboard adapts to mode

Expected: ✓ Complete separation of data


Test 7: Unauthorized Access
----------------------------
□ Try to fund milestone you don't own
□ Try to submit work for milestone not assigned to you
□ Try to approve milestone you're not client of
□ Try to access milestone in wrong mode

Expected: ✗ All should return 403 Forbidden


BLOCKCHAIN VERIFICATION
========================

Test 8: Real XLM Transfers
---------------------------
□ Note client wallet balance before funding
□ Fund milestone
□ Verify balance decreased by amount + fees
□ Note freelancer wallet balance before approval
□ Approve milestone
□ Verify freelancer balance increased by full amount
□ Verify contract balance changes

Expected: ✓ Real money movement visible in Freighter


Test 9: Transaction Hashes
---------------------------
□ Verify all transactions have valid hashes
□ Click transaction hash links
□ Verify opens Stellar Explorer
□ Verify transaction details match
□ Verify all parties visible on blockchain

Expected: ✓ All transactions verifiable on-chain


UI/UX TESTING
=============

Test 10: Dashboard Display
---------------------------
□ Verify milestone cards show correct info
□ Verify status badges color-coded
□ Verify amounts formatted correctly
□ Verify wallet addresses truncated
□ Verify mode badge visible
□ Verify stats accurate

Expected: ✓ Clean, informative display


Test 11: Loading States
------------------------
□ Verify loading spinner during transactions
□ Verify buttons disabled during processing
□ Verify success/error toasts appear
□ Verify page updates after actions

Expected: ✓ Smooth user experience


Test 12: Error Handling
------------------------
□ Try invalid wallet address
□ Try negative amount
□ Try to fund already funded milestone
□ Try to submit without funding
□ Try to approve without submission

Expected: ✓ Clear error messages


SECURITY AUDIT
==============

Test 13: Access Logs
---------------------
□ Check backend console for access logs
□ Verify wallet addresses logged
□ Verify modes logged
□ Verify actions logged

Expected: ✓ Complete audit trail


Test 14: Data Isolation
------------------------
□ Create milestone as User A
□ Connect as User B
□ Verify User B cannot see User A's milestones
□ Verify User B cannot act on User A's milestones

Expected: ✓ Complete data isolation


PERFORMANCE TESTING
====================

Test 15: Multiple Milestones
-----------------------------
□ Create 5+ milestones
□ Verify dashboard loads quickly
□ Verify filtering works correctly
□ Verify no data leaking

Expected: ✓ Scales well


EDGE CASES
==========

Test 16: Same User Both Roles
------------------------------
□ Create milestone as client
□ Switch to SELLING mode
□ Verify milestone NOT visible
□ Switch back to BUYING mode
□ Verify milestone IS visible

Expected: ✓ Strict mode separation


Test 17: Concurrent Actions
----------------------------
□ Open two browser windows
□ Connect different wallets
□ Perform actions simultaneously
□ Verify no conflicts

Expected: ✓ Handles concurrency


FINAL VERIFICATION
==================

□ All contract functions mapped correctly
□ All endpoints have role-based middleware
□ All actions require correct mode
□ All ownership verified before actions
□ All transactions signed by user
□ All XLM transfers are real
□ All transaction hashes stored
□ All data properly isolated
□ All errors handled gracefully
□ All logs captured for audit

READY FOR PRODUCTION: □ YES / □ NO

Notes:
______________________________________________________________________
______________________________________________________________________
______________________________________________________________________
